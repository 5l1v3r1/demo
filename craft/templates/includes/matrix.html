<article>
  <header class="alt2"
    {% if entry.backgroundColor %}
    style="background:{{ entry.backgroundColor }};"
    {% endif %}
  >
    <div class="flex">
      <div class="g1-flex4 g2-flex6 g3-flex12">
        <h1 class="alpha center reverse">{{ entry.title }}</h1>
      </div>
    </div>
  </header>

  <section>
    {% set image = entry.featuredImage.first() %}
    {% if image %}
      <img src="{{ image.getUrl({width: 2000}) }}" alt="image.title"/>
    {% endif %}
  </section>

  <section class="alt">
    <div class="flex">
      <div class="g1-flex4 g2-flex6 g3-flex10 g3-offset1">
        {% if entry.heading %}
        <h2 class="beta center">{{ entry.heading }}</h2>
        {% endif %}

        {% if entry.subheading %}
        <h3 class="delta center subfont">{{ entry.subheading }}</h3>
        {% endif %}
      </div>
    </div>
    <div class="flex">
      <div class="g1-flex4 g2-flex6 g3-flex10 g3-offset1">
        <hr class="horz-rule">
      </div>
    </div>

    <div class="container">

      {% for block in entry.articleBody %}

        {% switch block.type %}

          {% case "heading" %}

            <div class="block heading">
              <h3>{{ block.heading }}</h3>
            </div>

          {% case "text" %}

            <div class="block text">
              {{ block.text }}
            </div>

          {% case "pullQuote" %}

            <div class="block pullquote {{ block.position }}">
              <p>{{ block.pullQuote }}</p>
            </div>

          {% case "image" %}

            {% set image = block.image.first() %}
            {% if image %}
              {% if block.position == 'full' %}
                </div>
                <div class="fullimage tall" style="background-image: url('{{ image.getUrl({ width: 1440 }) }}');"></div>
                <div class="container">
              {% else %}
                {% if block.position == 'center' %}
                  {% do image.setTransform({ width: 960 }) %}
                {% else %}
                  {% do image.setTransform({ width: 440 }) %}
                {% endif %}

                <div class="block image {{ block.position }}">
                  <img src="{{ image.url }}" alt="{{ image.title }}">
                </div>
              {% endif %}
            {% endif %}

          {% case "quote" %}

            {% if block.position == 'full' %}
              </div>
              <div class="fullquote"
                {% if entry.backgroundColor %}
                style="background-color:{{ entry.backgroundColor }};"
                {% endif %}
              >
                <div class="container">
            {% else %}
              <div class="block quote {{ block.position }}">
            {% endif %}

            <blockquote>
              <p>{{ block.quote }}</p>

              {% if block.attribution %}
                <footer>â€“ <cite>{{ block.attribution }}</footer>
              {% endif %}
            </blockquote>

            {% if block.position == 'full' %}
                </div>
              </div>
              <div class="container">
            {% else %}
              </div>
            {% endif %}

        {% endswitch %}

      {% endfor %}

      <footer class="authorinfo">
        <span class="author">{{ entry.author.name }}</span>
      </footer>
    </div>
  </section>
</article>
